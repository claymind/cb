"use strict";var rulesBuilderApp=angular.module("rulesBuilderApp",["ngRoute","ngSanitize","rulesBuilderService"]);
rulesBuilderApp.config(["$routeProvider","$locationProvider",function(e,r){e.when("/",{templateUrl:"/partials/rules-designer"}).otherwise({templateUrl:"/partials/page-not-found"}),r.html5Mode(!1)}]);
angular.module("rulesBuilderApp").run(["$templateCache",function(n){n.put("expression-text.html","<span class='expression-text' ng-bind-html=\"exp.text\"></span>\n<span class='glyphicon glyphicon-collapse-down' ng-click=\"toggleExpressionEditor()\"></span>\n\n<span class='expression-editor'></span>\n\n"),n.put("function.html",'<section class="rb-function" data-functionid="{{item.id}}">\n    <section class="row display-mode" ng-hide="isEditMode">\n        <span class="function-keyword">Function</span>\n        <strong class="user-input">{{name}} <span class="error-text" ng-hide="function_form.function_name.$valid">{{function_form.function_name.$viewValue}}</span></strong>\n\n        <span class="operator-keyword">as</span>\n        <strong class="user-input">{{returnType}}</strong>\n\n        <ul class="parameterList indent">\n            <li ng-show="parameterList.length > 0" class="block-keyword">given</li>\n            <li class="parameter-item indent" node-container context="item" ng-repeat="item in parameterList"></li>\n        </ul>\n\n        <ul class="statementList indent">\n            <li ng-show="statementList.length > 0" class="block-keyword">begin</li>\n            <li class="statement-item" node-container context="item" ng-repeat="item in statementList"></li>\n            <li ng-show="statementList.length > 0" class="block-keyword">end</li>\n        </ul>\n    </section>\n\n    <section class="row edit-mode" ng-hide="!isEditMode">\n        <div class="col-sm-11">\n            <form class="form-inline" name="function_form" role="form">\n                <span class="function-keyword">Function</span>\n                <input ng-class="{\'input-error\' : function_form.function_name.$invalid}" class="form-control block-input user-input" name="function_name" ng-change="functionNameChange()" ng-model="name" placeholder="Enter Function Name" ng-required="true" ng-pattern="identifierPattern"  />\n\n                <span class="operator-keyword">as</span>\n                <select class="form-control user-input" ng-model="returnType" ng-change="functionReturnTypeChange($viewValue)" ng-options="obj for obj in returnTypes">\n                    <option class="form-control" value="item">Choose Type</option>\n                </select>\n\n\n                <ul class="parameterList indent">\n                    <li ng-show="parameterList.length > 0" class="block-keyword">given</li>\n                    <li class="parameter-item indent" node-container context="item" ng-repeat="item in parameterList"></li>\n                </ul>\n\n                <div class="block droppable indent {{parametersGroup}}"  data-group="{{parametersGroup}}">\n                    <i><span class="glyphicon glyphicon-tint"></span>Drop Parameter Node Here</i>\n                </div>\n\n                <ul class="statementList indent">\n                    <li ng-show="statementList.length > 0" class="block-keyword">begin</li>\n                    <li class="statement-item" node-container context="item" ng-repeat="item in statementList"></li>\n\n                    <li ng-hide="statementList.length > 0">\n                        <div class="block indent droppable {{statementsGroup}}" data-group="{{statementsGroup}}">\n                            <i><span class="glyphicon glyphicon-tint"></span>Drop Return Statement Here</i>\n                        </div>\n                    </li>\n                    <li ng-show="statementList.length > 0" class="block-keyword">end</li>\n                </ul>\n            </form>\n        </div>\n        <span class="col-sm-1 remove glyphicon glyphicon-remove-circle" ng-click="removeFunction($index)" title="Delete Function"></span>\n    </section>\n</section>\n'),n.put("infix-expression-editor.html",'<div class="row infix-expression editor">\n    <div class="col-sm-3 expression-left-nav" ng-show="scopeList.length > 0">\n        <ul class="scopeList">\n            <li class="scope-item" ng-repeat="item in scopeList">\n                <input type="radio" ng-model="left" name="items" value="{{item.name}}" ng-click="assignVariable()" /><label>{{item.name}}</label>\n            </li>\n        </ul>\n    </div>\n    <div class="col-sm-8 col-sm-offset-1">\n        <span class="row">\n            <div class=" left-expression Expressions block droppable" droppable="true" data-group="Expressions">{{left}}</div>\n            <div class=" expression-operator">{{operatorText}}</div>\n            <div class=" right-expression Literals block droppable" droppable="true" data-group="Literals">{{right}}</div>\n\n        </span>\n        <div class="row">\n            <div class="literal-input col-sm-10">\n                <div class="booleanPanel" ng-show="activeLiteral===\'BooleanLiteral\'">\n                    <label>Enter Boolean Literal value: </label>\n                    <select class=\'selectBoolean form-control\' ng-options=\'value as value for value in booleanValues\' ng-model=\'booleanLiteral\' ng-change=\'selectBooleanChange()\'></select>\n                </div>\n                <div class="integerPanel" ng-show="activeLiteral===\'IntegerLiteral\'">\n                    <label>Enter Integer Literal value: </label>\n                    <input class=\'integerInput form-control\'  ng-model=\'integerLiteral\' ng-change=\'integerLiteralChange()\' />\n                </div>\n                <div class="stringPanel" ng-show="activeLiteral===\'StringLiteral\'">\n                    <label>Enter String Literal value: </label>\n                    <input class=\'stringInput form-control\'  ng-model=\'stringLiteral\' ng-change=\'stringLiteralChange()\' />\n                </div>\n                <div class="fieldAccessPanel" ng-show="activeLiteral===\'FieldAccessNode\'">\n                    <label>Enter Field Access value: </label>\n                    <input class=\'stringInput form-control\'  ng-model=\'fieldAccessNode\' ng-change=\'fieldAccessNodeChange()\' />\n                </div>\n            </div>\n        </div>\n    </div>\n    <span class="remove glyphicon glyphicon-remove-circle" ng-click="closeInfixEditor()" title="Close Editor"></span>\n</div>\n<div class="row update-expression">\n    <div class="col-sm-11 text-right">\n        <button class="btn btn-primary save btn-lg" type="button" ng-click="updateExpression()"><span class="glyphicon glyphicon-save"></span>Update Expression</button>\n    </div>\n</div>\n\n\n\n\n\n'),n.put("literal-expression-editor.html",'<div class="row literal-expression editor">\n\n    <div class="col-sm-11 col-sm-offset-1">\n        <div class="row">\n            <div class="literal-input col-sm-10">\n                <div class="booleanPanel" ng-show="activeLiteral===\'BooleanLiteral\'">\n                    <label>Enter Boolean Literal value: </label>\n                    <select class=\'selectBoolean form-control\' ng-options=\'value as value for value in booleanValues\' ng-model=\'booleanLiteral\' ng-change=\'selectBooleanChange()\'></select>\n                </div>\n                <div class="integerPanel" ng-show="activeLiteral===\'IntegerLiteral\'">\n                    <label>Enter Integer Literal value: </label>\n                    <input class=\'integerInput form-control\'  ng-model=\'integerLiteral\' ng-change=\'integerLiteralChange()\' />\n                </div>\n                <div class="stringPanel" ng-show="activeLiteral===\'StringLiteral\'">\n                    <label>Enter String Literal value: </label>\n                    <input class=\'stringInput form-control\'  ng-model=\'stringLiteral\' ng-change=\'stringLiteralChange()\' />\n                </div>\n                <div class="nullPanel" ng-show="activeLiteral===\'NullLiteral\'">\n                    <label>empty</label>\n                </div>\n            </div>\n        </div>\n    </div>\n    <span class="remove glyphicon glyphicon-remove-circle" ng-click="closeInfixEditor()" title="Close Editor"></span>\n</div>\n<div class="row">\n    <div class="col-sm-11 text-right">\n        <button class="btn btn-primary save btn-lg" type="button" ng-click="updateExpression()"><span class="glyphicon glyphicon-save"></span>Update Expression</button>\n    </div>\n</div>\n\n\n\n\n\n'),n.put("page-not-found.html",'<div class="container">\n    <div class="jumbotron">\n       <h3>Oops! The page you\'re trying to view does not exist or has been removed. </h3>\n    </div>\n\n</div>'),n.put("parameter-node.html",'<section class="rb-parameter-node">\n    <section class="row display-mode" ng-hide="isEditMode">\n        <span class="user-input"><strong>{{item.name}}</strong><span class="operator-keyword"> as </span><strong class="user-input">{{item.value}}</strong></span>\n    </section>\n\n    <section class="row edit-mode" ng-hide="!isEditMode">\n        <div class="col-sm-11">\n            <input class="form-control user-input" ng-change="paramNameChange()" placeholder="Enter Parameter Name" ng-model="item.name" ng-required="true" ng-pattern="parameterPattern" />\n            <span class="operator-keyword">as</span>\n            <select class="form-control user-input" ng-model="item.value" ng-change="paramTypeChange($viewValue)"  ng-options="obj for obj in $parent.returnTypes">\n\n            </select>\n        </div>\n\n        <span class="col-sm-1 remove glyphicon glyphicon-remove-circle" ng-click="removeParameter($index)" title="Delete Parameter"></span>\n    </section>\n</section>\n\n'),n.put("program.html",'<ul class="program" droppable="true">\n    <li class="function-item" node-container context="item"  ng-repeat="item in functionList"></li>\n    <div ng-hide="functionList.length > 0" class="drop-function"><span class="glyphicon glyphicon-tint"></span><i>Drop Function or Validation Here</i></div>\n</ul>\n\n'),n.put("return-statement.html",'<section class="rb-return-statement indent">\n    <span class="display-mode" ng-hide="isEditMode">\n        <span class="return-keyword">return</span>\n        <span class="expression-node" ng-hide="!item.expression">\n            <span class="text" ng-bind-html="exp.text"></span>\n        </span>\n    </span>\n\n    <span class="edit-mode" ng-hide="!isEditMode">\n        <div class="row">\n            <div class="col-sm-11">\n                <span class="return-keyword">return</span>\n                <span class="expression-node" ng-hide="!item.expression">\n                    <span rb-expressiontext class=\'express\' item="item"></span>\n                </span>\n                <span class="block droppable Expressions Literals" data-group="Expressions, Literals" ng-hide="item.expression">\n                    <i><span class="glyphicon glyphicon-tint"></span>Drop Expression Here</i>\n                </span>\n\n            </div>\n\n            <span class="col-sm-1 remove glyphicon glyphicon-remove-circle" ng-click="removeStatement($index)" title="Delete Return Statement"></span>\n        </div>\n    </span>\n</section>\n\n\n'),n.put("rules-designer.html",'<section ng-controller="RulesBuilderCtrl" class="col-sm-12" xmlns="http://www.w3.org/1999/html">\n    <div class="row toolbar">\n        <div class="col-sm-8 text-left">\n            <img class="logo" src="images/cornerstone-logo.jpg">\n        </div>\n        <div class="col-sm-4 text-right actions">\n            <button class="btn btn-info toggle-edit" type="button" ng-click="toggleDisplayMode()" ng-hide="tempTree.children.length === 0"><span class=" glyphicon glyphicon-edit"></span>{{modeCaption}}</button>\n            <button class="btn btn-info save" type="button" ng-click="saveProgram()" ng-hide="tempTree.children.length === 0"><span class="glyphicon glyphicon-save"></span>Save Program</button>\n            <button class="btn btn-info reset" type="button" ng-click="resetProgram()" ng-hide="tempTree.children.length === 0"><span class="glyphicon glyphicon-repeat"></span>Reset</button>\n        </div>\n    </div>\n    <div class="row">\n        <section class="col-sm-1 rules-list left-nav">\n            <div class="row">\n                <ul class="nodeTypeList">\n                    <li ng-repeat="nodeItem in nodeThumbnails" class="node-thumbnail" node-thumbnail>\n                        <a draggable="true" class="btn draggable {{nodeItem.Id}} {{nodeItem.group}}">{{nodeItem.caption}}</a>\n                    </li>\n                </ul>\n            </div>\n        </section>\n        <section class="col-sm-8 main-content">\n            <div class="row">\n                <div node-container class="canvas droppable col-sm-11" data-group="Declarables"></div>\n            </div>\n        </section>\n        <section class="col-sm-3">\n            <pre>{{tempTree | json}}</pre>\n        </section>\n    </div>\n</section>'),n.put("simple-variable-expression-editor.html",'<div class="row equal-to-expression">\n    <div class="col-sm-3 expression-left-nav" ng-show="scopeList.length > 0">\n        <ul class="scopeList">\n            <li class="scope-item" ng-repeat="item in scopeList">\n                <input type="radio" ng-model="left" name="items" value="{{item.name}}" ng-click="assignVariable()" /><label>{{item.name}}</label>\n            </li>\n        </ul>\n    </div>\n    <div class="col-sm-8 col-sm-offset-1">\n        <span class="row">\n            <div class="col-sm-3 left-expression Expressions block droppable" droppable="true" data-group="Expressions">{{left}}</div>\n            <div class="col-sm-3 expression-operator">{{operatorText}}</div>\n            <div class="col-sm-3 right-expression Literals block droppable" droppable="true" data-group="Literals">{{right}}</div>\n        </span>\n        <div class="row">\n            <div class="literal-input col-sm-10">\n                <div class="booleanPanel" ng-show="activeLiteral===\'BooleanLiteral\'">\n                    <label>Enter Boolean Literal value: </label>\n                    <select class=\'selectBoolean form-control\' ng-options=\'value as value for value in booleanValues\' ng-model=\'booleanLiteral\' ng-change=\'selectBooleanChange()\'></select>\n                </div>\n                <div class="integerPanel" ng-show="activeLiteral===\'IntegerLiteral\'">\n                    <label>Enter Integer Literal value: </label>\n                    <input class=\'integerInput form-control\'  ng-model=\'integerLiteral\' ng-change=\'integerLiteralChange()\' />\n                </div>\n                <div class="stringPanel" ng-show="activeLiteral===\'StringLiteral\'">\n                    <label>Enter String Literal value: </label>\n                    <input class=\'stringInput form-control\'  ng-model=\'stringLiteral\' ng-change=\'stringLiteralChange()\' />\n                </div>\n            </div>\n        </div>\n    </div>\n    <span class="remove glyphicon glyphicon-remove-circle" ng-click="closeInfixEditor()" title="Close Editor"></span>\n</div>\n<div class="row">\n    <div class="col-sm-11 text-right">\n        <button class="btn btn-primary save btn-lg" type="button" ng-click="updateExpression()"><span class="glyphicon glyphicon-save"></span>Update Expression</button>\n    </div>\n</div>\n\n\n\n\n\n'),n.put("validation.html",'<section class="rb-validation" data-validationid="{{item.id}}">\n    <section class="row display-mode" ng-hide="isEditMode">\n        <div class="validation-expression" ng-show="name === \'Validation-Function-1\'">\n            <div class="function-keyword">Validate:</div>\n\n            <span class="expression-node" ng-hide="!item.expression">\n                <span class="text" ng-bind-html="exp.text"></span>\n            </span>\n        </div>\n        <div class="validation-message" ng-show="name === \'Validation-Function-2\'">\n            <div class="function-keyword">Message:</div>\n\n            <span class="user-input">{{validationMessage}}</span>\n        </div>\n    </section>\n\n    <section class="row edit-mode" ng-hide="!isEditMode">\n        <div class="col-sm-11">\n            <form class="form-inline" name="function_form" role="form">\n                <div class="validation-expression row" ng-show="name === \'Validation-Function-1\'">\n                    <div class="col-sm-11">\n                        <div class="function-keyword">Validate:</div>\n\n                        <span class="expression-node" ng-hide="!item.expression">\n                            <span rb-expressiontext class=\'express\' item="item"></span>\n                        </span>\n                        <span class="block droppable Expressions" data-group="Expressions" ng-hide="item.expression">\n                            <i><span class="glyphicon glyphicon-tint"></span>Drop Expression Here</i>\n                        </span>\n                    </div>\n                    <span class="col-sm-1 remove glyphicon glyphicon-remove-circle" ng-click="removeValidation($index)" title="Delete Validation"></span>\n                </div>\n                <div class="validation-message" ng-show="name === \'Validation-Function-2\'">\n                    <div class="function-keyword">Message:</div>\n\n                    <input ng-class="{\'input-error\' : function_form.validation_message.$invalid}" class="form-control block-input user-input" name="validation_message" ng-change="validationMessageChange()" ng-model="validationMessage" placeholder="Enter Message" ng-required="true" "  />\n                </div>\n            </form>\n        </div>\n    </section>\n</section>\n'),n.put("variable-node.html",'<section class="rb-variable-node">\n    <section class="row display-mode" ng-hide="isEditMode">\n        <span><strong>{{item.name}}</strong> equal <strong>{{item.value}}</strong></span>\n    </section>\n\n    <section class="row edit-mode" ng-hide="!isEditMode">\n        <input class="form-control" class="block-input" placeholder="Enter Variable Name" ng-model="item.name" ng-required="true" ng-pattern="variablePattern" />\n        <span>equal</span>\n        <input class="form-control" class="block-input" placeholder="Enter Initialization Value" ng-model="item.value" ng-required="true" ng-pattern="variablePattern" />\n            <span class="remove glyphicon glyphicon-remove-circle" ng-click="removeParameter($index)"></span>\n    </section>\n</section>\n\n')}]);
"use strict";rulesBuilderApp.controller("ModalInstanceCtrl",["$scope","$modalInstance","context",function(n,c,o){n.ok=function(){c.close(o)},n.cancel=function(){c.dismiss(o)}}]);
"use strict";rulesBuilderApp.controller("RulesBuilderCtrl",["$scope","$routeParams","validationService","$location","$filter","$rootScope",function(e,t,r){e.nodes=[],e.modeCaption="Switch to Edit Mode",e.toggleDisplayMode=function(){e.isEditMode=!e.isEditMode,e.isEditMode===!0?(e.modeCaption="Switch to Display Mode",e.$broadcast("isEditModeFired")):(e.modeCaption="Switch to Edit Mode",e.$broadcast("isDisplayModeFired"))},e.saveProgram=function(){e.uiTree=angular.copy(r.tempTree),alert("Rule Saved Successfully")},r.getNodes(function(t,r){var o=r;e.nodeThumbnails=[];for(var i=0;i<o.length;i++)o[i].caption=o[i].Id.replace(/([A-Z])/g," $1"),e.nodeThumbnails.push(o[i])}),e.isUnchanged=function(){return angular.equals(r.tempTree,e.uiTree)},e.resetProgram=function(){e.uiTree=r.getUITree(),r.tempTree=angular.copy(e.uiTree);for(var t,o=r.getSyntaxTree().entity,i=0;i<o.length;i++){for(var a=Object.keys(o[i]),n="",d=0;d<a.length;d++)"type"!==a[d]&&(n=a[d]);t={ref:"0-"+uuid.v1(),value:o[i].type,name:n},r.tempTree.table.push(t)}},e.resetProgram(),e.tempTree=r.tempTree}]);
"use strict";rulesBuilderApp.directive("nodeContainer",["$compile","validationService",function(e,t){return{restriction:"A",scope:{context:"=context"},link:function(n,r){var i,o,c=n.context;if(i=c?c.controlName:t.tempTree&&t.tempTree.controlName){i="rb-"+i,o=i;var a=$("<span "+i+"></span>");a=e(a)(n.$parent),r.append(a)}}}}]);
"use strict";rulesBuilderApp.directive("nodeThumbnail",["$sce","validationService","$filter","$compile",function(){var e;return{restrict:"A",link:function(t,i){i.find(".draggable").on("dragstart",null,{scope:t},function(i){this.style.opacity="0.4",e=this,i.originalEvent.dataTransfer.effectAllowed="move",i.originalEvent.dataTransfer.setData("text",JSON.stringify({type:t.nodeItem.Id}))}),i.find(".draggable").on("dragend",null,{scope:t},function(){this.style.opacity="1",$(this).parent().removeClass("over")})}}}]);
"use strict";rulesBuilderApp.directive("rbProgram",["$sce","validationService","$filter","$templateCache",function(e,t){return{restrict:"A",templateUrl:"/partials/program.html",link:function(e,i){e.functionList=[];var i=i.closest(".canvas"),r=function(){for(var i=0;i<t.tempTree.children.length;i++)switch(t.tempTree.children[i].type){case"Function":e.functionList.push(t.tempTree.children[i]);break;case"Validation":e.functionList.push(t.tempTree.children[i])}};r(),i.on("dragover",null,{scope:e},function(e){return e.preventDefault&&e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="move",!1}),i.on("dragenter",null,{scope:e},function(){$(this).addClass("over")}),i.on("dragleave",null,{scope:e},function(){$(this).removeClass("over")}),i.on("drop",null,{scope:e},function(i){return i.stopPropagation&&i.stopPropagation(),$(this).removeClass("over"),e.$apply(function(){var r=JSON.parse(i.originalEvent.dataTransfer.getData("text"));if(r){var n=$(i.currentTarget).data("group");if(t.isValidNode(r.type,n))switch(r.type){case"Function":var a={id:uuid.v1(),type:"Function",controlName:"Function",fields:[{name:"Name",value:"newFunction"},{name:"ReturnType",value:"truth"},{name:"Parameters",children:[]},{name:"Body",children:[]}]};t.addFunction(a,t.tempTree)&&e.functionList.push(a);break;case"Validation":var o,s,l;s={id:uuid.v1(),type:"Function",controlName:"Function",fields:[{name:"Name",value:"Validation-Function-1"},{name:"ReturnType",value:"truth"},{name:"Parameters",children:[]},{name:"Body",children:[]}]},l={id:uuid.v1(),type:"Function",controlName:"Function",fields:[{name:"Name",value:"Validation-Function-2"},{name:"ReturnType",value:"text"},{name:"Parameters",children:[]},{name:"Body",children:[{type:"ReturnStatement",id:uuid.v1(),controlName:"Returnstatement",expression:{id:uuid.v1(),type:"StringLiteral",value:""}}]}]},o={id:uuid.v1(),type:"Validation",controlName:"Validation",children:[]},o.children.push(s),o.children.push(l),t.addValidation(o,t.tempTree)&&e.functionList.push(o),e.$broadcast("isEditModeFired",e)}}}),!1})}}}]),rulesBuilderApp.directive("rbFunction",["$sce","validationService","$filter","$templateCache",function(e,t){return{restrict:"A",templateUrl:"/partials/function.html",link:function(e,i){e.body=null,e.parameterList=[],e.statementList=[],e.blockList=[],e.returnTypes=[],e.$on("isEditModeFired",function(){e.isEditMode=!0}),e.$on("isDisplayModeFired",function(){e.isEditMode=!1});for(var r=t.getProductions("Identifier"),n=0;n<r.length;n++)if(r[n].Pattern){e.identifierPattern=r[n].Pattern;break}for(var a=t.getProductions("ParameterNode"),n=0;n<a.length;n++)if(a[n].Group){e.parametersGroup=a[n].Group;break}for(var o=t.getProductions("ReturnStatement"),n=0;n<o.length;n++)if(o[n].Group){e.statementsGroup=o[n].Group;break}for(var s=t.getFunctionReturnTypes(),l=0;l<s.length;l++)switch(s[l].Id){case"BooleanTypeNode":e.returnTypes.push("truth");break;case"IntegerTypeNode":e.returnTypes.push("number");break;case"StringTypeNode":e.returnTypes.push("text");break;case"NullTypeNode":e.returnTypes.push("null")}if(e.item.fields)for(var p=0;p<e.item.fields.length;p++){var d=e.item.fields[p];switch(d.name){case"Name":e.name=d.value;break;case"ReturnType":e.returnType=d.value;break;case"Parameters":if(d.children)for(var c=0;c<d.children.length;c++)if(d.children[c].ref){var u=t.getTableReference(d.children[c].ref,e.item.id);u.controlName=d.children[c].type,u&&e.parameterList.push(u)}break;case"Body":for(var f=0;f<d.children.length;f++)e.statementList.push(d.children[f])}}e.removeFunction=function(i){t.removeFunction(this.item,t.tempTree,e.item.id)&&e.functionList.splice(i,1)},e.removeParameter=function(i){t.removeFunctionParameter(this.item,t.tempTree,e.item.id)&&e.parameterList.splice(i,1)},e.functionNameChange=function(){t.editFunctionName(t.tempTree,e.item.id,this.name)},e.functionReturnTypeChange=function(){t.editFunctionReturnType(t.tempTree,e.item.id,this.returnType)},e.paramNameChange=function(){t.editFunctionParameter(this.item,t.tempTree,e.item.id,"name",this.item.name)},e.paramTypeChange=function(){t.editFunctionParameter(this.item,t.tempTree,e.item.id,"value",this.item.value)},e.removeStatement=function(i){t.removeStatement(this.item,t.tempTree,e.item.id)&&e.statementList.splice(i,1)},i.find(".droppable").on("dragover",null,{scope:e},function(e){return e.preventDefault&&e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="move",!1}),i.find(".droppable").on("dragenter",null,{scope:e},function(){$(this).addClass("over")}),i.find(".droppable").on("dragleave",null,{scope:e},function(){$(this).removeClass("over")}),i.find(".droppable").on("drop",null,{scope:e},function(i){return $(this).removeClass("over"),i.stopPropagation&&i.stopPropagation(),e.$apply(function(){var r=JSON.parse(i.originalEvent.dataTransfer.getData("text"));if(r){var n=$(i.currentTarget).data("group"),a={};if(t.isValidNode(r.type,n))switch(r.type){case"ParameterNode":a={functionId:e.item.id,type:"ParameterNode",controlName:"Parameternode",action:"Edit"},t.getTableReference(a.ref,a.functionId)||(a.ref=uuid.v1(),e.parameterList.push(a),console.info(t.addFunctionParameter(a,t.tempTree,a.functionId,t.tempTree)?"Add Parameter Successful":"Add Parameter Failed"));break;case"ReturnStatement":a={functionId:e.item.id,type:"ReturnStatement",controlName:"Returnstatement",action:"Edit"},a.id=uuid.v1(),e.statementList.push(a),console.info(t.addStatement(a,t.tempTree,a.functionId,t.tempTree)?"Add Statement Successful":"Add Statement Failed")}}}),!1})}}}]),rulesBuilderApp.directive("rbParameternode",["$sce","validationService","$filter","$templateCache",function(){return{restrict:"A",templateUrl:"/partials/parameter-node.html",link:function(e){e.$on("isEditModeFired",function(){e.isEditMode=!0}),e.$on("isDisplayModeFired",function(){e.isEditMode=!1})}}}]),rulesBuilderApp.directive("rbExpressiontext",["$sce","validationService","$filter","$compile","$templateCache",function(e,t,i,r){return{restrict:"A",templateUrl:"/partials/expression-text.html",scope:{item:"=item"},link:function(e,i){e.exp={};var n=e.item&&e.item.expression&&e.item.expression.type,a=function(n){if(n){var a=i.find(".expression-editor");switch(n){case"EqualToExpression":case"NotEqualToExpression":case"LessThanExpression":case"GreaterThanExpression":case"LessThanOrEqualExpression":case"GreaterThanOrEqualExpression":var o="<div rb-Infixexpressioneditor></div>";o=r(o)(e),a.append(o);break;case"SimpleVariableReferenceNode":break;case"BooleanLiteral":case"IntegerLiteral":case"StringLiteral":var s="<div rb-Literalexpressioneditor></div>";s=r(s)(e),a.append(s);break;case"NullLiteral":e.exp.text="empty";var l=i.closest(".rb-function");if(l.length>0){var p=l.data("functionid");e.item.expression.value=e.exp.text,t.updateExpression(t.tempTree,e.item.expression,e.item.id,p)}}}};if(n&&e.item.expression.left&&e.item.expression.left.type){var o=t.createInfixExpressionText(e.item,i,null);e.exp.text=o.text,e.left=o.left,e.right=o.right,e.operatorText=o.operator,a(e.item.expression.type)}e.$on("expressionDropped",function(t,i){e.item.expression=i[0],e.exp.text="<i>Click to Build Expression</i>",e.operatorText=i[2],e.isEditMode=!0,a(e.item.expression.type)}),e.$on("expressionUpdated",function(r,n){var a=i.find(".expression-text"),o=t.createInfixExpressionText(n[0],a,n[1]);e.exp.text=o.text,e.$emit("expressionToDisplay",e.exp.text)}),e.toggleExpressionEditor=function(){i.find(".expression-editor").toggle("slow",function(){})}}}}]),rulesBuilderApp.directive("rbReturnstatement",["$sce","validationService","$filter","$compile","$templateCache",function(e,t){return{restrict:"A",templateUrl:"/partials/return-statement.html",scope:!0,link:function(e,i){if(e.exp={},e.$on("isEditModeFired",function(){e.isEditMode=!0}),e.$on("isDisplayModeFired",function(){e.isEditMode=!1}),e.$on("expressionToDisplay",function(t,r){e.exp.text=r,i.find(".display-mode .expression-node .text").html(e.exp.text)}),e.item&&e.item.expression&&e.item.expression.left&&e.item.expression.left.type){var r=t.createInfixExpressionText(e.item.expression,i,null);e.exp.text=r.text}i.find(".droppable").on("dragover",null,{scope:e},function(e){return e.preventDefault&&e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="move",!1}),i.find(".droppable").on("dragenter",null,{scope:e},function(){$(this).addClass("over")}),i.find(".droppable").on("dragleave",null,{scope:e},function(){$(this).removeClass("over")}),i.find(".droppable").on("drop",null,{scope:e},function(r){return $(this).removeClass("over"),r.stopPropagation&&r.stopPropagation(),e.$apply(function(){var n=JSON.parse(r.originalEvent.dataTransfer.getData("text"));if(n){var a=$(r.currentTarget).data("group");if(t.isValidNode(n.type,a)){var o=i.closest(".rb-function");if(o.length>0){var s="";switch(n.type){case"EqualToExpression":s="is equal to",n.left={},n.right={},n.id=uuid.v1();break;case"NotEqualToExpression":s="is not equal to",n.left={},n.right={},n.id=uuid.v1();break;case"LessThanExpression":s="is less than",n.left={},n.right={},n.id=uuid.v1();break;case"GreaterThanExpression":s="is greater than",n.left={},n.right={},n.id=uuid.v1();break;case"LessThanOrEqualExpression":s="is less than or equal to",n.left={},n.right={},n.id=uuid.v1();break;case"GreaterThanOrEqualExpression":s="is greater than or equal to",n.left={},n.right={},n.id=uuid.v1();break;case"BooleanLiteral":case"StringLiteral":case"IntegerLiteral":case"NullLiteral":case"FieldAccessNode":n.id=uuid.v1()}var l=o.data("functionid");t.addExpression(n,t.tempTree,e.item.id,l)&&e.$broadcast("expressionDropped",[n,e.item,s])}}}}),!1})}}}]),rulesBuilderApp.directive("rbInfixexpressioneditor",["$sce","validationService","$filter","$templateCache",function(e,t){return{restrict:"A",templateUrl:"/partials/infix-expression-editor.html",link:function(e,i){e.scopeList=[],e.booleanValues=["true","false"],e.booleanValue="false",e.booleanLiteral=!1,e.stringLiteral="",e.integerLiteral=0,e.fieldAccessNode="",e.nullLiteral="null",e.tempLeft,e.tempRight,e.$on("isEditModeFired",function(){e.isEditMode=!0}),e.$on("isDisplayModeFired",function(){e.isEditMode=!1}),e.closeInfixEditor=function(){i.closest(".expression-editor").hide("slow",function(){})},e.activeElement,e.activeLiteral,e.assignVariable=function(){"left"===e.activeElement&&(e.tempLeft=this.item,i.find(".left-expression.droppable").html(this.item.name))},e.selectBooleanChange=function(){"right"===e.activeElement&&(i.find(".right-expression.droppable").html(this.booleanLiteral),e.tempRight=this.booleanLiteral)},e.integerLiteralChange=function(){"right"===e.activeElement&&(i.find(".right-expression.droppable").html(this.integerLiteral),e.tempRight=this.integerLiteral)},e.stringLiteralChange=function(){"right"===e.activeElement&&(i.find(".right-expression.droppable").html(this.stringLiteral),e.tempRight=this.stringLiteral)},e.updateExpression=function(){var r;"FieldAccessNode"===e.leftType?r={left:{ref:e.tempLeft.ref,type:e.leftType},right:{type:e.rightType,value:e.tempRight,expression:{}},type:e.item.expression&&e.item.expression.type}:"SimpleVariableReferenceNode"===e.leftType&&(r={left:{ref:e.tempLeft.ref,type:e.leftType},right:{type:e.rightType,value:e.tempRight,expression:{}},type:e.item.expression&&e.item.expression.type});var n,a,o,s=i.closest(".rb-function");if(s.length>0)n=s.data("functionid"),a=e.item.id,o=t.tempTree;else if("Validation"===e.item.controlName){n=e.item.children[0].id,o=e.item;for(var l=0;l<e.item.children[0].fields.length;l++)if("Body"===e.item.children[0].fields[l].name)for(var p=0;p<e.item.children[0].fields[l].children.length;p++)"ReturnStatement"===e.item.children[0].fields[l].children[p].type&&(a=e.item.children[0].fields[l].children[p].id)}t.updateExpression(o,r,a,n),e.$emit("expressionUpdated",[r,n]),i.closest(".expression-editor").hide("slow",function(){})},i.find(".left-expression.droppable").on("dragover",null,{scope:e},function(e){return e.preventDefault&&e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="move",!1}),i.find(".left-expression.droppable").on("dragenter",null,{scope:e},function(){$(this).addClass("over")}),i.find(".left-expression.droppable").on("dragleave",null,{scope:e},function(){$(this).removeClass("over")}),i.find(".left-expression.droppable").on("drop",null,{scope:e},function(r){return $(this).removeClass("over"),r.stopPropagation&&r.stopPropagation(),e.scopeList=[],i.find(".scopeList").css("visibility","visible"),e.activeElement="left",e.activeLiteral="",e.$apply(function(){var n=JSON.parse(r.originalEvent.dataTransfer.getData("text"));if(n){var a=$(r.currentTarget).data("group");if(t.isValidNode(n.type,a)){var o,s=i.closest(".rb-function");switch(s.length>0?o=s.data("functionid"):"Validation"===e.item.controlName&&(o=t.tempTree.children[0].id),e.leftType=n.type,n.type){case"SimpleVariableReferenceNode":for(var l=t.getTableVarsInScope(o,t.tempTree),p=0;p<l.length;p++)e.scopeList.push(l[p]);break;case"FieldAccessNode":for(var l=t.getEntityVars(t.tempTree),p=0;p<l.length;p++)e.scopeList.push(l[p])}}}}),!1}),i.find(".right-expression.droppable").on("dragover",null,{scope:e},function(e){return e.preventDefault&&e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="move",!1}),i.find(".right-expression.droppable").on("dragenter",null,{scope:e},function(){$(this).addClass("over")}),i.find(".right-expression.droppable").on("dragleave",null,{scope:e},function(){$(this).removeClass("over")}),i.find(".right-expression.droppable").on("drop",null,{scope:e},function(r){return $(this).removeClass("over"),r.stopPropagation&&r.stopPropagation(),e.activeElement="right",i.find(".scopeList").css("visibility","hidden"),e.$apply(function(){var n=JSON.parse(r.originalEvent.dataTransfer.getData("text"));if(n){var a=$(r.currentTarget).data("group");if(t.isValidNode(n.type,a)){switch(e.rightType=n.type,n.type){case"BooleanLiteral":e.activeLiteral="BooleanLiteral";break;case"IntegerLiteral":e.activeLiteral="IntegerLiteral";break;case"StringLiteral":e.activeLiteral="StringLiteral";break;case"NullLiteral":e.activeLiteral="NullLiteral",i.find(".right-expression.droppable").html("null"),e.tempRight="empty";break;case"SimpleVariableReferenceNode":e.activeLiteral="SimpleVariableReferenceNode";break;case"FieldAccessNode":e.activeLiteral="FieldAccessNode"}}}}),!1})}}}]),rulesBuilderApp.directive("rbLiteralexpressioneditor",["$sce","validationService","$filter","$templateCache",function(e,t){return{restrict:"A",templateUrl:"/partials/literal-expression-editor.html",link:function(e,i){e.scopeList=[],e.booleanValues=["true","false"],e.booleanValue="false",e.booleanLiteral=!1,e.stringLiteral="",e.integerLiteral=0,e.nullLiteral="null",e.tempExp,e.activeLiteral,e.$on("isEditModeFired",function(){e.isEditMode=!0}),e.$on("isDisplayModeFired",function(){e.isEditMode=!1});switch(e.item.expression.type){case"BooleanLiteral":e.activeLiteral="BooleanLiteral";break;case"IntegerLiteral":e.activeLiteral="IntegerLiteral";break;case"StringLiteral":e.activeLiteral="StringLiteral";break;case"NullLiteral":e.activeLiteral="NullLiteral"}e.closeInfixEditor=function(){i.closest(".expression-editor").hide("slow",function(){})},e.selectBooleanChange=function(){i.find(".literal-expression.droppable").html(this.booleanLiteral),e.tempExp=this.booleanLiteral},e.integerLiteralChange=function(){i.find(".literal-expression.droppable").html(this.integerLiteral),e.tempExp=this.integerLiteral},e.stringLiteralChange=function(){i.find(".literal-expression.droppable").html(this.stringLiteral),e.tempExp=this.stringLiteral},e.updateExpression=function(){var r={type:e.activeLiteral,value:e.tempExp,expression:{}},n=i.closest(".rb-function");if(n.length>0){var a=n.data("functionid");t.updateExpression(t.tempTree,r,e.$parent.item.id,a),e.$emit("expressionUpdated",[r,a]),i.closest(".expression-editor").hide("slow",function(){})}}}}}]),rulesBuilderApp.directive("rbValidation",["$sce","validationService","$filter","$compile","$templateCache",function(e,t){return{restrict:"A",templateUrl:"/partials/validation.html",scope:!0,link:function(e,i){if(e.body=null,e.parameterList=[],e.validationMessage="",e.exp={},e.function1={parameterList:[],statementList:[]},e.function2={parameterList:[],statementList:[]},e.$on("isEditModeFired",function(){e.isEditMode=!0}),e.$on("isDisplayModeFired",function(){e.isEditMode=!1}),e.$on("expressionToDisplay",function(t,r){e.exp.text=r,i.find(".display-mode .expression-node .text").html(e.exp.text)}),e.item&&e.item.expression&&e.item.expression.left&&e.item.expression.left.type){var r=t.createInfixExpressionText(e.item.expression,i,null);e.exp.text=r.text}if(e.item.children.length>0)for(var n=0;n<e.item.children.length;n++){var a="function"+(n+1);if(e.item.children[n].fields)for(var o=0;o<e.item.children[n].fields.length;o++){var s=e.item.children[n].fields[o];switch(s.name){case"Name":e[a].name=s.value;break;case"ReturnType":e[a].returnType=s.value;break;case"Parameters":if(s.children)for(var l=0;l<s.children.length;l++)if(s.children[l].ref){var p=t.getTableReference(s.children[l].ref,e.item.id);p.controlName=s.children[l].type,p&&e[a].parameterList.push(p)}break;case"Body":for(var d=0;d<s.children.length;d++)e[a].statementList.push(s.children[d])}}}e.removeValidation=function(){for(var i=t.tempTree.children.length;i>0;i--)t.removeFunction(t.tempTree.children[i-1],t.tempTree,t.tempTree.children[i-1].id)&&e.functionList.splice(i-1,1)},e.validationMessageChange=function(){for(var t=0;t<e.$parent.item.children[1].fields.length;t++)if("Body"===e.$parent.item.children[1].fields[t].name)for(var i=0;i<e.$parent.item.children[1].fields[t].children.length;i++)if("ReturnStatement"===e.$parent.item.children[1].fields[t].children[i].type){e.expression=e.$parent.item.children[1].fields[t].children[i].expression,e.expression.value=this.validationMessage;break}},i.find(".droppable").on("dragover",null,{scope:e},function(e){return e.preventDefault&&e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="move",!1}),i.find(".droppable").on("dragenter",null,{scope:e},function(){$(this).addClass("over")}),i.find(".droppable").on("dragleave",null,{scope:e},function(){$(this).removeClass("over")}),i.find(".droppable.Expressions").on("drop",null,{scope:e},function(i){return $(this).removeClass("over"),i.stopPropagation&&i.stopPropagation(),e.$apply(function(){var r=JSON.parse(i.originalEvent.dataTransfer.getData("text"));if(r){var n=$(i.currentTarget).data("group");if(t.isValidNode(r.type,n)){var a="";switch(r.type){case"EqualToExpression":a="is equal to",r.left={},r.right={},r.id=uuid.v1();break;case"NotEqualToExpression":a="is not equal to",r.left={},r.right={},r.id=uuid.v1();break;case"LessThanExpression":a="is less than",r.left={},r.right={},r.id=uuid.v1();break;case"GreaterThanExpression":a="is greater than",r.left={},r.right={},r.id=uuid.v1();break;case"LessThanOrEqualExpression":a="is less than or equal to",r.left={},r.right={},r.id=uuid.v1();break;case"GreaterThanOrEqualExpression":a="is greater than or equal to",r.left={},r.right={},r.id=uuid.v1()}if("Validation"===e.$parent.item.type){var o=e.$parent.item.children[0].id,s={type:"ReturnStatement",id:uuid.v1(),controlName:"Returnstatement",expression:{}};t.addStatement(s,e.$parent.item,o)&&t.addExpression(r,e.$parent.item,s.id,o)&&e.$broadcast("expressionDropped",[r,s,a])}}}}),!1})}}}]);
"use strict";var rulesServices=angular.module("rulesBuilderService",["ngResource"]);rulesServices.factory("validationService",function(){return{tempTree:{},getFunctionReturnTypes:function(){for(var e=[],r=0;r<this.getSyntaxTree().SyntaxNodes.length;r++){var o=this.getSyntaxTree().SyntaxNodes[r];o.Id.search("TypeNode")>0&&e.push(o)}return e},getProductions:function(e){for(var r=[],o=0;o<this.getSyntaxTree().SyntaxNodes.length;o++){var n=this.getSyntaxTree().SyntaxNodes[o];if(e===n.Id){if(n.Productions)for(var t=0;t<n.Productions.length;t++)r.push(n.Productions[t]);if(n.Fields)for(var i=0;i<n.Fields.length;i++)n.Fields[i].Node&&this.getParentProductions(n.Fields[i].Node,r);n.Parent&&this.getParentProductions(n.Parent,r)}}return r},getParentProductions:function(e,r){if(e.Productions)for(var o=0;o<e.Productions.length;o++)r.push(e.Productions[o]);for(var n=0;n<e.Fields.length;n++){if(e.Fields[n].Productions)for(var o=0;o<e.Fields[n].Productions.length;o++)r.push(e.Fields[n].Productions[o]);e.Fields[n].Node&&this.getParentProductions(e.Fields[n].Node,r)}return r},isValidNode:function(e,r){for(var o,n=0;n<this.getSyntaxTree().SyntaxNodes.length;n++){var t=this.getSyntaxTree().SyntaxNodes[n];if(e===t.Id)for(var i=this.getProductions(t.Id),l=0;l<i.length;l++)if(2===i[l].ProductionType&&i[l].Group){o=i[l].Group;break}}r=r.split(",");for(var d=0;d<r.length;d++)if(o===r[d].trim())return!0;return!1},getFields:function(e){for(var r=this.getSyntaxTree().syntaxNodes.syntaxNode,o=0;r>o;o++)if(r[o].productions&&r[o].productions.showVisual&&r[o].productions.showVisual&&e===r[o]._id&&r[o].fields&&r[o].fields.syntaxField)for(var n=0;n<r[o].fields.syntaxField;n++);},findNodeAndDelete:function(e,r,o,n){if(r.children)for(var t=0;t<r.children.length;t++)if(e.id){if(r.children[t].id===e.id)return r.children.splice(t,1),!0;this.findNodeAndDelete(e.id,r.children[t],o)}else if(e.ref)if(r.children[t].ref){if(r.children[t].ref===e.ref)return r.children.splice(t,1),this.removeRefFromTable(e.ref,o,n),!0;this.findNodeAndDelete(e,r.children[t],o,n)}else if(r.children[t].left)if(r.children[t].left.ref){if(r.children[t].left.ref===e.ref)return r.children.splice(t,1),this.removeRefFromTable(e.ref,o,n),!0;this.findNodeAndDelete(e,r.children[t],o,n)}else if(r.children[t].right.ref){if(r.children[t].right.ref===e.ref)return r.children.splice(t,1),this.removeRefFromTable(e.ref,o,n),!0;this.findNodeAndDelete(e,r.children[t],o,n)}if(r.fields)for(var t=0;t<r.fields.length;t++)if(e.fields){if(r.fields[t].name===e.id)return r.children.splice(t,1),!0;this.findNodeAndDelete(nodeId,r.fields[t],o,n)}else if(e.ref){if(r.fields[t].ref===e.ref)return r.fields.splice(t,1),this.removeRefFromTable(e.ref,o,n),!0;this.findNodeAndDelete(e,r.fields[t],o,n)}},addFunctionParameter:function(e,r,o){for(var n=0;n<r.children.length;n++)if(r.children[n].id===o)for(var t=0;t<r.children[n].fields.length;t++)if("Parameters"===r.children[n].fields[t].name){for(var i=0;i<r.children[n].fields[t].children.length;i++){var l=r.children[n].fields[t].children[i];if(l.ref===e.ref)return!1}return r.children[n].fields[t].children.push({controlName:e.controlName,ref:e.ref,type:e.type}),r.table.push({ref:e.ref,value:"truth",name:"newParameter",functionId:e.functionId}),!0}return!1},removeFunction:function(e,r,o){for(var n=0;n<r.children.length;n++)if(r.children[n].id===o){r.children.splice(n,1);for(var n=r.table.length;n>0;n--)r.table[n-1].functionId===o&&r.table.splice(n-1,1);return!0}return!1},addValidation:function(e,r){for(var o=0;o<r.children.length;o++)if(r.children[o].id===e.id&&"Validation"===r.children[o].type)return!1;return r.children.push(e),!0},addFunction:function(e,r){for(var o=0;o<r.children.length;o++)if(r.children[o].id===e.id)return!1;return delete e.action,r.children.push(e),!0},removeFunctionParameter:function(e,r,o){for(var n=0;n<r.children.length;n++)if(r.children[n].id===o)for(var t=0;t<r.children[n].fields.length;t++)if("Parameters"===r.children[n].fields[t].name)for(var i=0;i<r.children[n].fields[t].children.length;i++){var l=r.children[n].fields[t].children[i];if(l.ref===e.ref)return r.children[n].fields[t].children.splice(i,1),this.removeRefFromTable(e.ref,o,r),!0}return!1},editFunctionParameter:function(e,r,o,n,t){for(var i=0;i<r.children.length;i++)if(r.children[i].id===o)for(var l=0;l<r.children[i].fields.length;l++)if("Parameters"===r.children[i].fields[l].name)for(var d=0;d<r.children[i].fields[l].children.length;d++){var a=r.children[i].fields[l].children[d];if(a.ref===e.ref)return this.editRefFromTable(e.ref,o,r,n,t)}return!1},removeRefFromTable:function(e,r,o){for(var n=0;n<o.table.length;n++)if(o.table[n].functionId===r&&o.table[n].ref===e)return o.table.splice(n,1),!0;return!1},editRefFromTable:function(e,r,o,n,t){for(var i=0;i<o.table.length;i++)if(o.table[i].functionId===r&&o.table[i].ref===e)return o.table[i][n]=t,!0},editFunctionName:function(e,r,o){for(var n=0;n<e.children.length;n++)if(e.children[n].id===r)for(var t=0;t<e.children[n].fields.length;t++)if("Name"===e.children[n].fields[t].name)return e.children[n].fields[t].value=o,!0;return!1},editFunctionReturnType:function(e,r,o){for(var n=0;n<e.children.length;n++)if(e.children[n].id===r)for(var t=0;t<e.children[n].fields.length;t++)if("ReturnType"===e.children[n].fields[t].name)return e.children[n].fields[t].value=o,!0;return!1},updateExpression:function(e,r,o,n){for(var t=0;t<e.children.length;t++)e.children[t].id===n&&traverse(e.children[t]).forEach(function(e){"object"==typeof e&&e.id===o&&(r.left&&(e.expression.left=r.left),r.right&&(e.expression.right=r.right),r.value&&(e.expression.value=r.value))});return!1},removeStatement:function(e,r,o){for(var n=0;n<r.children.length;n++)if(r.children[n].id===o)for(var t=0;t<r.children[n].fields.length;t++)if("Body"===r.children[n].fields[t].name)for(var i=0;i<r.children[n].fields[t].children.length;i++){var l=r.children[n].fields[t].children[i];if("ReturnStatement"===l.type&&e.id===l.id)return r.children[n].fields[t].children.splice(i,1),!0}return!1},addExpression:function(e,r,o,n){for(var t=0;t<r.children.length;t++)if(r.children[t].id===n)for(var i=0;i<r.children[t].fields.length;i++)if("Body"===r.children[t].fields[i].name)for(var l=0;l<r.children[t].fields[i].children.length;l++)if("ReturnStatement"===r.children[t].fields[i].children[l].type)return r.children[t].fields[i].children[l].expression=e,!0;return!1},createInfixExpressionText:function(e,r,o){var n,t,i=this,l="",d="",a="",u=[],s="";this.functionId=o,traverse(e).forEach(function(o){if(o&&"object"==typeof e&&void 0!==o.type)switch(o.type){case"EqualToExpression":d="(<span class='user-input left'>{left}</span> <span class='operator-keyword'>is equal to</span> <span class='user-input right'>{right}</span>)",l="is equal to",s?("left"===a&&(s=s.replace("{left}",d)),"right"===a&&(s=s.replace("{right}",d))):s+=d;break;case"NotEqualToExpression":d="(<span class='user-input'>{left}</span> <span class='operator-keyword'>is not equal to</span> <span class='user-input'>{right}</span>)",l="is not equal to",s?("left"===a&&(s=s.replace("{left}",d)),"right"===a&&(s=s.replace("{right}",d))):s+=d;break;case"LessThanExpression":d="(<span class='user-input'>{left}</span> <span class='operator-keyword'>is less than</span> <span class='user-input'>{right}</span>)",l="is less than",s?("left"===a&&(s=s.replace("{left}",d)),"right"===a&&(s=s.replace("{right}",d))):s+=d;break;case"GreaterThanExpression":d="(<span class='user-input'>{left}</span> <span class='operator-keyword'>is greater than</span> <span class='user-input'>{right}</span>)",l="is greater than",s?("left"===a&&(s=s.replace("{left}",d)),"right"===a&&(s=s.replace("{right}",d))):s+=d;break;case"LessThanOrEqualExpression":d="(<span class='user-input'>{left}</span> <span class='operator-keyword'>is less than or equal to</span> <span class='user-input'>{right}</span>)",l="is less than or equal to",s?("left"===a&&(s=s.replace("{left}",d)),"right"===a&&(s=s.replace("{right}",d))):s+=d;break;case"GreaterThanOrEqualExpression":d="(<span class='user-input'>{left}</span> <span class='operator-keyword'>is greater than or equal to</span> <span class='user-input'>{right}</span>)",l="is greater than or equal to",s?("left"===a&&(s=s.replace("{left}",d)),"right"===a&&(s=s.replace("{right}",d))):s+=d;break;case"SimpleVariableReferenceNode":if(o.ref){var n,t=r.closest(".rb-function");n=t.length>0?t.data("functionid"):i.functionId;var c=i.getTableReference(o.ref,n);c.name&&u.push(c.name)}"left"===a&&s.replace("{left}",s),"right"===a&&s.replace("{right}",s);break;case"FieldAccessNode":if(o.ref){var c=i.getTableReference(o.ref,n);c.name&&u.push(c.name)}"left"===a&&s.replace("{left}",s),"right"===a&&s.replace("{right}",s);break;case"left":o.value&&u.push(o.value),a="left";break;case"right":o.value&&u.push(o.value),a="right";break;default:o.value&&(u.push(o.value),a="literal")}});for(var c=0;c<u.length;c++){var P=s.indexOf("{"),p=s.indexOf("}"),y=s.substring(P,p+1);"{left}"===y?n=u[c]:"{right}"===y&&(t=u[c]),s=s.replace(y,u[c])}return{text:s,left:n,right:t,operator:l}},addStatement:function(e,r,o){for(var n=0;n<r.children.length;n++)if(r.children[n].id===o)for(var t=0;t<r.children[n].fields.length;t++)if("Body"===r.children[n].fields[t].name)return r.children[n].fields[t].children.push({controlName:e.controlName,id:e.id,type:e.type,expression:{}}),!0;return!1},getTransformation:function(e){return angular.forEach(this.getSyntaxTree().syntaxNodes.syntaxNode,function(r){return r.productions&&r.productions.showVisual&&r.productions.showVisual&&e===r._id?r.Transformation:void 0}),null},getFamilyTree:function(){return{name:"Parent",children:[{name:"Child1",children:[{name:"Grandchild1",children:[]},{name:"Grandchild2",children:[]},{name:"Grandchild3",children:[]}]},{name:"Child2",children:[]}]}},getSyntaxTree:function(){return{Root:{Id:"Program",Fields:[{Node:{Id:"StatementNode",Fields:[],Productions:[{Value:!0,ProductionType:1}],Parent:null},Name:"Statements",Productions:[{Value:!1,ProductionType:0},{Value:!0,Element:"Statement",ProductionType:3},{Nodes:["Declaration"],ProductionType:4}]}],Productions:[{Group:"Root",ProductionType:2}],Parent:null},SyntaxNodes:[{Id:"Program",Fields:[{Node:{Id:"StatementNode",Fields:[],Productions:[{Value:!0,ProductionType:1}],Parent:null},Name:"Statements",Productions:[{Value:!1,ProductionType:0},{Value:!0,Element:"Statement",ProductionType:3},{Nodes:["Declaration"],ProductionType:4}]}],Productions:[{Group:"Root"}],Parent:null},{Id:"StatementNode",Fields:[],Productions:[{Value:!0,ProductionType:1}],Parent:null},{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null},{Id:"Declaration",Fields:[{Node:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null},Name:"Declarable",Productions:[]}],Productions:[],Parent:{Id:"StatementNode",Fields:[],Productions:[{Value:!0,ProductionType:1}],Parent:null}},{Id:"Identifier",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Value",Productions:[]}],Productions:[{Pattern:/^[a-zA-Z]*$/,ProductionType:5}],Parent:null},{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},{Id:"BooleanTypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},{Id:"IntegerTypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},{Id:"StringTypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},{Id:"NullTypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null},{Id:"VariableNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"Type",Productions:[]},{Node:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null},Name:"Initializer",Productions:[{Value:!0,ProductionType:0}]}],Productions:[{Left:"Initializer.ExpressionType",Right:"Type",ProductionType:6},{Group:"Declarables",ProductionType:2}],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},{Id:"ParameterNode",Fields:[],Productions:[{Group:"Declarables",ProductionType:2}],Parent:{Id:"VariableNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"Type",Productions:[]},{Node:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null},Name:"Initializer",Productions:[{Value:!0,ProductionType:0}]}],Productions:[{Left:"Initializer.ExpressionType",Right:"Type",ProductionType:6},{Group:"Declarables",ProductionType:2}],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}}},{Id:"Block",Fields:[{Node:{Id:"StatementNode",Fields:[],Productions:[{Value:!0,ProductionType:1}],Parent:null},Name:"Statements",Productions:[{Value:!0,Element:"Statement",ProductionType:3}]}],Productions:[{Value:!0,ProductionType:7}],Parent:null},{Id:"Function",Fields:[{Node:{Id:"Identifier",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Value",Productions:[]}],Productions:[{Pattern:/^[a-zA-Z]*$/,ProductionType:5}],Parent:null},Name:"Name",Productions:[{Value:!1,ProductionType:0}]},{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ReturnType",Productions:[{Value:!0,ProductionType:0}]},{Node:{Id:"ParameterNode",Fields:[],Productions:[{Group:"Declarables",ProductionType:2}],Parent:{Id:"VariableNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"Type",Productions:[]},{Node:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null},Name:"Initializer",Productions:[{Value:!0,ProductionType:0}]}],Productions:[{Left:"Initializer.ExpressionType",Right:"Type",ProductionType:6},{Group:"Declarables",ProductionType:2}],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}}},Name:"Parameters",Productions:[{Value:!0,ProductionType:0},{Value:!0,Element:"Parameter",ProductionType:3}]},{Node:{Id:"Block",Fields:[{Node:{Id:"StatementNode",Fields:[],Productions:[{Value:!0,ProductionType:1}],Parent:null},Name:"Statements",Productions:[{Value:!0,Element:"Statement",ProductionType:3}]}],Productions:[{Value:!0,ProductionType:7}],Parent:null},Name:"Body",Productions:[{Value:!0,ProductionType:0}]}],Productions:[{Value:!0,ProductionType:7},{Group:"Declarables",ProductionType:2}],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},{Id:"Validation",Fields:[{Node:{Id:"Function",Fields:[{Node:{Id:"Identifier",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Value",Productions:[]}],Productions:[{Pattern:/^[a-zA-Z]*$/,ProductionType:5}],Parent:null},Name:"Name",Productions:[{Value:!1,ProductionType:0}]},{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ReturnType",Productions:[{Value:!0,ProductionType:0}]},{Node:{Id:"ParameterNode",Fields:[],Productions:[{Group:"Declarables",ProductionType:2}],Parent:{Id:"VariableNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"Type",Productions:[]},{Node:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null},Name:"Initializer",Productions:[{Value:!0,ProductionType:0}]}],Productions:[{Left:"Initializer.ExpressionType",Right:"Type",ProductionType:6},{Group:"Declarables",ProductionType:2}],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}}},Name:"Parameters",Productions:[{Value:!0,ProductionType:0},{Value:!0,Element:"Parameter",ProductionType:3}]},{Node:{Id:"Block",Fields:[{Node:{Id:"StatementNode",Fields:[],Productions:[{Value:!0,ProductionType:1}],Parent:null},Name:"Statements",Productions:[{Value:!0,Element:"Statement",ProductionType:3}]}],Productions:[{Value:!0,ProductionType:7}],Parent:null},Name:"Body",Productions:[{Value:!0,ProductionType:0}]}],Productions:[{Value:!0,ProductionType:7},{Group:"Declarables",ProductionType:2}],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"when",Productions:[{TypeName:"bool",ProductionType:14},{Value:!0,ProductionType:0}]},{Node:{Id:"Function",Fields:[{Node:{Id:"Identifier",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Value",Productions:[]}],Productions:[{Pattern:/^[a-zA-Z]*$/,ProductionType:5}],Parent:null},Name:"Name",Productions:[{Value:!1,ProductionType:0}]},{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ReturnType",Productions:[{Value:!0,ProductionType:0}]},{Node:{Id:"ParameterNode",Fields:[],Productions:[{Group:"Declarables",ProductionType:2}],Parent:{Id:"VariableNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"Type",Productions:[]},{Node:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null},Name:"Initializer",Productions:[{Value:!0,ProductionType:0}]}],Productions:[{Left:"Initializer.ExpressionType",Right:"Type",ProductionType:6},{Group:"Declarables",ProductionType:2}],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}}},Name:"Parameters",Productions:[{Value:!0,ProductionType:0},{Value:!0,Element:"Parameter",ProductionType:3}]},{Node:{Id:"Block",Fields:[{Node:{Id:"StatementNode",Fields:[],Productions:[{Value:!0,ProductionType:1}],Parent:null},Name:"Statements",Productions:[{Value:!0,Element:"Statement",ProductionType:3}]}],Productions:[{Value:!0,ProductionType:7}],Parent:null},Name:"Body",Productions:[{Value:!0,ProductionType:0}]}],Productions:[{Value:!0,ProductionType:7},{Group:"Declarables",ProductionType:2}],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"validate",Productions:[{TypeName:"bool",ProductionType:14}]},{Node:{Id:"Function",Fields:[{Node:{Id:"Identifier",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Value",Productions:[]}],Productions:[{Pattern:/^[a-zA-Z]*$/,ProductionType:5}],Parent:null},Name:"Name",Productions:[{Value:!1,ProductionType:0}]},{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ReturnType",Productions:[{Value:!0,ProductionType:0}]},{Node:{Id:"ParameterNode",Fields:[],Productions:[{Group:"Declarables",ProductionType:2}],Parent:{Id:"VariableNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"Type",Productions:[]},{Node:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null},Name:"Initializer",Productions:[{Value:!0,ProductionType:0}]}],Productions:[{Left:"Initializer.ExpressionType",Right:"Type",ProductionType:6},{Group:"Declarables",ProductionType:2}],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}}},Name:"Parameters",Productions:[{Value:!0,ProductionType:0},{Value:!0,Element:"Parameter",ProductionType:3}]},{Node:{Id:"Block",Fields:[{Node:{Id:"StatementNode",Fields:[],Productions:[{Value:!0,ProductionType:1}],Parent:null},Name:"Statements",Productions:[{Value:!0,Element:"Statement",ProductionType:3}]}],Productions:[{Value:!0,ProductionType:7}],Parent:null},Name:"Body",Productions:[{Value:!0,ProductionType:0}]}],Productions:[{Value:!0,ProductionType:7},{Group:"Declarables",ProductionType:2}],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"message",Productions:[{TypeName:"string",ProductionType:14}]}],Productions:[{Group:"Declarables",ProductionType:2}],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},{Id:"BlockStatement",Fields:[{Node:{Id:"Block",Fields:[{Node:{Id:"StatementNode",Fields:[],Productions:[{Value:!0,ProductionType:1}],Parent:null},Name:"Statements",Productions:[{Value:!0,Element:"Statement",ProductionType:3}]}],Productions:[{Value:!0,ProductionType:7}],Parent:null},Name:"MainBlock",Productions:[]}],Productions:[{Group:"Statements"}],Parent:{Id:"StatementNode",Fields:[],Productions:[{Value:!0,ProductionType:1}],Parent:null}},{Id:"VariableExpressionNode",Fields:[],Productions:[{Value:!0,ProductionType:8}],Parent:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null}},{Id:"SimpleVariableReferenceNode",Fields:[{Node:{Id:"VariableNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"Type",Productions:[]},{Node:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null},Name:"Initializer",Productions:[{Value:!0,ProductionType:0}]}],Productions:[{Left:"Initializer.ExpressionType",Right:"Type",ProductionType:6},{Group:"Declarables",ProductionType:2}],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"Referent",Productions:[{Name:"Name",ProductionType:9}]},{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[{Value:!0,ProductionType:8}]},{Type:"System.Boolean, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"IsStatic",Productions:[{Value:!0,ProductionType:8}]}],Productions:[{Field:"ExpressionType",From:"Referent.Type",ProductionType:10},{Group:"Expressions",ProductionType:2}],Parent:{Id:"VariableExpressionNode",Fields:[],Productions:[{Value:!0,ProductionType:8}],Parent:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null}}},{Id:"MemberAccessNode",Fields:[{Node:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null},Name:"Parent",Productions:[]},{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"ChildId",Productions:[]},{Type:"System.Boolean, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"IsStatic",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:{Id:"VariableExpressionNode",Fields:[],Productions:[{Value:!0,ProductionType:8}],Parent:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null}}},{Id:"FieldAccessNode",Fields:[],Productions:[{TypeNodeName:"Parent.ExpressionType",FieldName:"ChildId",IsStatic:"IsStatic",FieldToSet:"ExpressionType",ProductionType:13},{Group:"Expressions",ProductionType:2}],Parent:{Id:"MemberAccessNode",Fields:[{Node:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null},Name:"Parent",Productions:[]},{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"ChildId",Productions:[]},{Type:"System.Boolean, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"IsStatic",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:{Id:"VariableExpressionNode",Fields:[],Productions:[{Value:!0,ProductionType:8}],Parent:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null}}}},{Id:"EqualToExpression",Fields:[],Productions:[],Parent:{Id:"InfixExpressionNode",Fields:[{Node:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null},Name:"Left",Productions:[]},{Node:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null},Name:"Right",Productions:[]}],Productions:[{Value:!0,ProductionType:8},{Group:"Expressions",ProductionType:2},{Left:"Left",Right:"Right",ProductionType:6}],Parent:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null}}},{Id:"NotEqualToExpression",Fields:[],Productions:[],Parent:{Id:"InfixExpressionNode",Fields:[{Node:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null},Name:"Left",Productions:[]},{Node:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null},Name:"Right",Productions:[]}],Productions:[{Value:!0,ProductionType:8},{Group:"Expressions",ProductionType:2},{Left:"Left",Right:"Right",ProductionType:6}],Parent:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null}}},{Id:"LessThanExpression",Fields:[],Productions:[],Parent:{Id:"InfixExpressionNode",Fields:[{Node:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null},Name:"Left",Productions:[]},{Node:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null},Name:"Right",Productions:[]}],Productions:[{Value:!0,ProductionType:8},{Group:"Expressions",ProductionType:2},{Left:"Left",Right:"Right",ProductionType:6}],Parent:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null}}},{Id:"GreaterThanExpression",Fields:[],Productions:[],Parent:{Id:"InfixExpressionNode",Fields:[{Node:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null},Name:"Left",Productions:[]},{Node:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null},Name:"Right",Productions:[]}],Productions:[{Value:!0,ProductionType:8},{Group:"Expressions",ProductionType:2},{Left:"Left",Right:"Right",ProductionType:6}],Parent:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null}}},{Id:"LessThanOrEqualExpression",Fields:[],Productions:[],Parent:{Id:"InfixExpressionNode",Fields:[{Node:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null},Name:"Left",Productions:[]},{Node:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null},Name:"Right",Productions:[]}],Productions:[{Value:!0,ProductionType:8},{Group:"Expressions",ProductionType:2},{Left:"Left",Right:"Right",ProductionType:6}],Parent:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null}}},{Id:"GreaterThanOrEqualExpression",Fields:[],Productions:[],Parent:{Id:"InfixExpressionNode",Fields:[{Node:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null},Name:"Left",Productions:[]},{Node:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null},Name:"Right",Productions:[]}],Productions:[{Value:!0,ProductionType:8},{Group:"Expressions",ProductionType:2},{Left:"Left",Right:"Right",ProductionType:6}],Parent:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null}}},{Id:"LiteralNode",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Lexeme",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null}},{Id:"BooleanLiteral",Fields:[],Productions:[{Field:"Lexeme",Options:["true","false"],ProductionType:11},{TypeNodeName:"BooleanTypeNode",ProductionType:12},{Group:"Literals",ProductionType:2}],Parent:{Id:"LiteralNode",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Lexeme",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null}}},{Id:"IntegerLiteral",Fields:[],Productions:[{TypeNodeName:"IntegerTypeNode",ProductionType:12},{Pattern:/^d+$/,ProductionType:5},{Group:"Literals",ProductionType:2}],Parent:{Id:"LiteralNode",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Lexeme",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null}}},{Id:"StringLiteral",Fields:[],Productions:[{TypeNodeName:"StringTypeNode",ProductionType:12},{Group:"Literals",ProductionType:2}],Parent:{Id:"LiteralNode",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Lexeme",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null}}},{Id:"NullLiteral",Fields:[],Productions:[{TypeNodeName:"NullLiteral",ProductionType:12},{Group:"Literals",ProductionType:2}],Parent:{Id:"LiteralNode",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Lexeme",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null}}},{Id:"ReturnStatement",Fields:[{Node:{Id:"ExpressionNode",Fields:[{Node:{Id:"TypeNode",Fields:[],Productions:[],Parent:{Id:"Declarable",Fields:[{Type:"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089",Name:"Name",Productions:[]}],Productions:[{Value:!0,ProductionType:1}],Parent:null}},Name:"ExpressionType",Productions:[]}],Productions:[],Parent:null},Name:"Expression",Productions:[]}],Productions:[{Group:"Statements",ProductionType:2}],Parent:{Id:"StatementNode",Fields:[],Productions:[{Value:!0,ProductionType:1}],Parent:null}}],entity:[{type:"string",firstname:"Ronald"},{type:"string",lastname:"McDonald"},{type:"string",address:"1843 Wilshire Blvd. Los Angeles CA 91230"}]}
},getEntityVars:function(e){var r=[];if(e.table){for(var o=0;o<e.table.length;o++)e.table[o].functionId||r.push({name:e.table[o].name,ref:e.table[o].ref,value:e.table[o].value});return r}},getNodes:function(e){for(var r=[],o=0;o<this.getSyntaxTree().SyntaxNodes.length;o++)for(var n=this.getSyntaxTree().SyntaxNodes[o],t=this.getProductions(n.Id),i=0;i<t.length;i++)if(2===t[i].ProductionType){t[i].Group&&(n.group=t[i].Group),r.push(n);break}e(null,r)},getTableReference:function(e,r){var o=this.tempTree;if(o.table){for(var n=0;n<o.table.length;n++)if(o.table[n].ref===e){if(!o.table[n].functionId)return o.table[n];if(o.table[n].functionId===r)return o.table[n]}return void 0}},getTableVarsInScope:function(e,r){var o=[];if(r.table){for(var n=0;n<r.table.length;n++)r.table[n].functionId===e&&o.push({name:r.table[n].name,ref:r.table[n].ref});return o}},traverse:function(e,r){var o,n=this;return e&&e.children&&angular.forEach(e.children,function(e){e.id===r.id?o=e:n.traverse(e,r)}),o?o:void 0},getUITree:function(){return this.getUITreeBasic()},getUITreeComplex:function(){var e={id:"Program-1",type:"Program",controlName:"Program",table:[{ref:-12345,name:"employee",value:"string"},{ref:12345,value:"truth",name:"active",functionId:"Function-1"},{ref:23456,value:"number",name:"age",functionId:"Function-1"},{ref:45678,value:"text",name:"FirstName",functionId:"Function-1"},{ref:12345,value:"truth",name:"active",functionId:"Function-2"},{ref:23456,value:"number",name:"age",functionId:"Function-2"},{ref:45678,value:"text",name:"FirstName",functionId:"Function-2"}],children:[{id:"Function-1",type:"Function",controlName:"Function",fields:[{name:"Name",value:"test"},{name:"ReturnType",value:"truth"},{name:"Parameters",children:[{ref:12345,type:"ParameterNode",controlName:"Parameternode"},{ref:45678,type:"ParameterNode",controlName:"Parameternode"},{ref:23456,type:"ParameterNode",controlName:"Parameternode"}]},{name:"Body",children:[{type:"ReturnStatement",id:"12345",controlName:"Returnstatement",expression:{id:"54321",type:"EqualToExpression",left:{type:"left",expression:{id:"98765",type:"EqualToExpression",left:{type:"left",expression:{id:"11221",type:"SimpleVariableReferenceNode",ref:23456}},right:{type:"IntegerLiteral",value:10,expression:{}}}},right:{type:"IntegerLiteral",value:36,expression:{}}}}]}]},{id:"Function-2",type:"Function",controlName:"Function",fields:[{name:"Name",value:"test"},{name:"ReturnType",value:"truth"},{name:"Parameters",children:[{ref:12345,type:"ParameterNode",controlName:"Parameternode"},{ref:45678,type:"ParameterNode",controlName:"Parameternode"},{ref:23456,type:"ParameterNode",controlName:"Parameternode"}]},{name:"Body",children:[{type:"ReturnStatement",id:"12345",controlName:"Returnstatement",expression:{id:"35423",type:"EqualToExpression",left:{type:"left",expression:{id:98768,type:"SimpleVariableReferenceNode",ref:23456}},right:{type:"IntegerLiteral",value:36,expression:{}}}}]}]}]};return e},getUITreeBasic:function(){var e={id:"Program-1",type:"Program",controlName:"Program",table:[{ref:"12345",value:"truth",name:"scary",functionId:"Function-1"},{ref:"23456",value:"number",name:"x",functionId:"Function-1"},{ref:"45678",value:"text",name:"greeting",functionId:"Function-1"},{ref:"12345",value:"truth",name:"funny",functionId:"Function-2"},{ref:"23456",value:"number",name:"y",functionId:"Function-2"},{ref:"45678",value:"text",name:"message",functionId:"Function-2"}],children:[{id:"Function-1",type:"Function",controlName:"Function",fields:[{name:"Name",value:"test"},{name:"ReturnType",value:"truth"},{name:"Parameters",children:[{ref:"12345",type:"ParameterNode",controlName:"Parameternode"},{ref:"45678",type:"ParameterNode",controlName:"Parameternode"},{ref:"23456",type:"ParameterNode",controlName:"Parameternode"}]},{name:"Body",children:[{type:"ReturnStatement",id:"12345",controlName:"Returnstatement",expression:{id:"54321",type:"EqualToExpression",left:{type:"left",expression:{id:"11221",type:"SimpleVariableReferenceNode",ref:"23456"}},right:{type:"IntegerLiteral",value:"18",expression:{}}}}]}]},{id:"Function-2",type:"Function",controlName:"Function",fields:[{name:"Name",value:"test"},{name:"ReturnType",value:"truth"},{name:"Parameters",children:[{ref:"12345",type:"ParameterNode",controlName:"Parameternode"},{ref:"45678",type:"ParameterNode",controlName:"Parameternode"},{ref:"23456",type:"ParameterNode",controlName:"Parameternode"}]},{name:"Body",children:[{type:"ReturnStatement",id:"12345",controlName:"Returnstatement",expression:{id:"35423",type:"EqualToExpression",left:{type:"right",expression:{id:"98768",type:"SimpleVariableReferenceNode",ref:"23456"}},right:{type:"IntegerLiteral",value:"36",expression:{}}}}]}]}]};return e},getUITreeEmpty:function(){return{id:"Program-1",type:"Program",controlName:"Program",table:[{ref:"0",name:"it"}],children:[]}}}}),rulesServices.factory("RecursionHelper",["$compile",function(e){return{compile:function(r,o){angular.isFunction(o)&&(o={post:o});var n,t=r.contents().remove();return{pre:o&&o.pre?o.pre:null,post:function(r,i){n||(n=e(t)),n&&n(r,function(e){i.append(e)}),o&&o.post&&o.post.apply(null,arguments)}}}}}]);